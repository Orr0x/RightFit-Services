# RightFit Services - Database Tables

**Generated**: November 7, 2025 at 12:30:00
**Database**: PostgreSQL (Docker, Port 5433)
**Database Name**: rightfit_dev
**Schema**: public

---

## Database Summary

**Total Tables**: 57
**Total Tenants**: 6
**Total Users**: 14
**Total Service Providers**: 1
**Total Workers**: 3
**Total Customers**: 1

---

## All Database Tables (Alphabetical)

### A
1. **AIAssessment** - AI-powered assessment data
2. **Certificate** - Worker/contractor certificates

### C
3. **ChecklistTemplate** - Cleaning/maintenance checklist templates
4. **CleaningContract** - Cleaning service contracts
5. **CleaningInvoice** - Invoices for cleaning services
6. **CleaningJob** - Cleaning job records
7. **CleaningJobHistory** - Historical cleaning job data
8. **CleaningJobTimesheet** - Worker timesheets for cleaning jobs
9. **CleaningQuote** - Quotes for cleaning services
10. **CleaningService** - Cleaning service definitions
11. **ContractFile** - Contract document attachments
12. **ContractProperty** - Properties linked to contracts
13. **Contractor** - Maintenance contractors
14. **Customer** - Customer/client records

### D-E
15. **CustomerNotification** - Customer notification preferences
16. **CustomerPortalUser** - Customer portal user accounts
17. **CustomerPreferences** - Customer settings and preferences
18. **CustomerProperty** - Properties owned by customers
19. **Device** - Device registrations (mobile/tablet)
20. **DIYAttempt** - DIY maintenance attempt records
21. **DIYGuide** - DIY maintenance guides
22. **ExternalContractor** - External/third-party contractors

### F-G
23. **FinancialTransaction** - Financial transaction records
24. **GuestIssue** - Issues reported by guests
25. **GuestIssueReport** - Detailed guest issue reports
26. **GuestQuestion** - Guest inquiry records
27. **GuestSession** - Guest tablet session data

### I-L
28. **Invoice** - General invoice records
29. **LocalRecommendation** - Local service recommendations
30. **MaintenanceJob** - Maintenance job records

### N-P
31. **Notification** - System notifications
32. **PasswordResetToken** - Password reset tokens
33. **Photo** - Photo/image storage
34. **Property** - Property records
35. **PropertyBudget** - Property budget tracking
36. **PropertyCalendar** - Property event calendar
37. **PropertyChecklistTemplate** - Property-specific checklist templates
38. **PropertyHistory** - Property change history
39. **PropertyKnowledgeBase** - Property knowledge/documentation
40. **PropertyShare** - Property sharing between tenants
41. **PropertyTenant** - Tenant assignments to properties

### Q-R
42. **Quote** - General quote records
43. **RentPayment** - Rent payment tracking

### S
44. **Service** - Service definitions
45. **ServiceProvider** - Service provider business records

### T
46. **Tenant** - Tenant/organization records

### U-W
47. **User** - User account records
48. **WorkOrder** - Work order records
49. **Worker** - Worker/employee records
50. **WorkerAvailability** - Worker availability schedules
51. **WorkerCertificate** - Worker certification records
52. **WorkerHistory** - Worker employment history
53. **WorkerIssueReport** - Issues reported by workers

---

## Core Tables Detail

### Authentication & Users

#### Tenant
**Purpose**: Multi-tenant organization records
**Key Fields**:
- `id` (UUID, Primary Key)
- `tenant_name` (String)
- `subscription_status` (SubscriptionStatus)
- `trial_ends_at` (DateTime)

**Current Records**: 6
- CleanCo Services (Test)
- FixIt Maintenance (Test)
- ABC Properties LLC (Test)
- Rightfit
- AI researcher
- Test User

#### User
**Purpose**: User authentication and account management
**Key Fields**:
- `id` (UUID, Primary Key)
- `tenant_id` (UUID, Foreign Key ‚Üí Tenant)
- `email` (String, Unique)
- `password_hash` (String)
- `full_name` (String)
- `role` (UserRole: ADMIN, MEMBER)
- `deleted_at` (DateTime, nullable)

**Current Records**: 14
- 8 ADMIN users
- 6 MEMBER users

#### ServiceProvider
**Purpose**: Service provider business information
**Key Fields**:
- `id` (UUID, Primary Key)
- `tenant_id` (UUID, Foreign Key ‚Üí Tenant)
- `business_name` (String)
- `owner_name` (String)
- `email` (String)
- `service_type` (ServiceType)

**Current Records**: 1
- RightFit Services (AI researcher tenant)

### Cleaning Module

#### CleaningJob
**Purpose**: Cleaning job scheduling and tracking
**Key Fields**:
- `id` (UUID, Primary Key)
- `property_id` (UUID)
- `customer_id` (UUID)
- `service_id` (UUID)
- `assigned_worker_id` (UUID, nullable)
- `status` (JobStatus)
- `scheduled_date` (DateTime)
- `scheduled_start_time` (Time)
- `scheduled_end_time` (Time)

#### CleaningContract
**Purpose**: Recurring cleaning service contracts
**Key Fields**:
- `id` (UUID, Primary Key)
- `customer_id` (UUID)
- `service_provider_id` (UUID)
- `contract_name` (String)
- `start_date` (Date)
- `end_date` (Date)
- `billing_frequency` (BillingFrequency)

#### Worker
**Purpose**: Cleaning and maintenance worker records
**Key Fields**:
- `id` (UUID, Primary Key)
- `service_provider_id` (UUID)
- `first_name` (String)
- `last_name` (String)
- `email` (String)
- `phone` (String)
- `worker_type` (WorkerType: CLEANER, MAINTENANCE)
- `employment_type` (EmploymentType)
- `hourly_rate` (Decimal)
- `is_active` (Boolean)

**Current Records**: 3
- Sarah Morrison (CLEANER)
- Mike Thompson (MAINTENANCE)
- kerry robins (CLEANER)

### Maintenance Module

#### MaintenanceJob
**Purpose**: Maintenance job tracking and management
**Key Fields**:
- `id` (UUID, Primary Key)
- `property_id` (UUID)
- `customer_id` (UUID)
- `title` (String)
- `description` (Text)
- `category` (MaintenanceCategory)
- `priority` (Priority)
- `status` (JobStatus)

#### Contractor
**Purpose**: Maintenance contractor records
**Key Fields**:
- `id` (UUID, Primary Key)
- `tenant_id` (UUID)
- `user_id` (UUID, nullable)
- `first_name` (String)
- `last_name` (String)
- `email` (String)
- `specialties` (Array)

### Customer Module

#### Customer
**Purpose**: Customer/client business records
**Key Fields**:
- `id` (UUID, Primary Key)
- `customer_number` (String, Unique)
- `service_provider_id` (UUID)
- `business_name` (String)
- `contact_name` (String)
- `email` (String)
- `phone` (String)

**Current Records**: 1
- Highland Haven Lodges (Contact: Emma Henderson)

#### CustomerProperty
**Purpose**: Properties owned/managed by customers
**Key Fields**:
- `id` (UUID, Primary Key)
- `customer_id` (UUID)
- `property_name` (String)
- `address` (String)
- `property_type` (PropertyType)
- `bedrooms` (Integer)
- `bathrooms` (Integer)

### Property Module

#### Property
**Purpose**: Main property records
**Key Fields**:
- `id` (UUID, Primary Key)
- `tenant_id` (UUID)
- `property_name` (String)
- `property_type` (PropertyType)
- `address` (String)
- `postcode` (String)

#### PropertyBudget
**Purpose**: Property budget tracking
**Key Fields**:
- `id` (UUID, Primary Key)
- `property_id` (UUID)
- `budget_type` (BudgetType)
- `amount` (Decimal)
- `period` (BudgetPeriod)

### Supporting Tables

#### ChecklistTemplate
**Purpose**: Reusable checklist templates
**Key Fields**:
- `id` (UUID, Primary Key)
- `service_provider_id` (UUID)
- `template_name` (String)
- `category` (ChecklistCategory)
- `items` (JSON array)

#### Photo
**Purpose**: Photo/image storage and management
**Key Fields**:
- `id` (UUID, Primary Key)
- `tenant_id` (UUID)
- `uploaded_by_user_id` (UUID)
- `file_path` (String)
- `file_name` (String)
- `file_size` (Integer)
- `mime_type` (String)

#### Notification
**Purpose**: System notifications
**Key Fields**:
- `id` (UUID, Primary Key)
- `tenant_id` (UUID)
- `user_id` (UUID)
- `title` (String)
- `message` (Text)
- `is_read` (Boolean)
- `notification_type` (NotificationType)

---

## Enumerations (Enums)

### UserRole
- `ADMIN` - Full administrative access
- `MEMBER` - Limited access

### WorkerType
- `CLEANER` - Cleaning worker
- `MAINTENANCE` - Maintenance worker

### EmploymentType
- `FULL_TIME`
- `PART_TIME`
- `CONTRACT`
- `ZERO_HOURS`

### JobStatus
- `PENDING`
- `SCHEDULED`
- `IN_PROGRESS`
- `COMPLETED`
- `CANCELLED`

### ServiceType
- `CLEANING`
- `MAINTENANCE`
- `BOTH`

### SubscriptionStatus
- `TRIAL`
- `ACTIVE`
- `PAST_DUE`
- `CANCELLED`
- `EXPIRED`

### Priority
- `LOW`
- `MEDIUM`
- `HIGH`
- `URGENT`

### PropertyType
- `HOUSE`
- `APARTMENT`
- `COTTAGE`
- `LODGE`
- `HOTEL_ROOM`

---

## Current Database State

### Original/Production Data ‚úÖ

#### Users (Original - Still Present)
1. **jamesrobins9@gmail.com**
   - Name: James Lee Robins
   - Role: ADMIN
   - Tenant: Rightfit
   - Status: Active

2. **test2@rightfit.com**
   - Name: James Lee Robins
   - Role: ADMIN
   - Tenant: AI researcher
   - Status: Active

3. **test@rightfit.com**
   - Name: Test User
   - Role: ADMIN
   - Tenant: Test User
   - Status: Active

4. **kerradeth@gmail.com**
   - Name: kerry robins
   - Role: MEMBER
   - Tenant: AI researcher
   - Status: Active

#### Service Provider (Original - Still Present)
**RightFit Services**
- Owner: Alex Robertson
- Email: alex@rightfit-services.co.uk
- Tenant: AI researcher
- Status: Active

#### Workers (Original - Still Present)
1. **Sarah Morrison**
   - Email: sarah@rightfit-services.co.uk
   - Phone: +44 7700 123456
   - Type: CLEANER
   - Service Provider: RightFit Services
   - Status: Active

2. **Mike Thompson**
   - Email: mike@rightfit-services.co.uk
   - Phone: +44 7700 234567
   - Type: MAINTENANCE
   - Service Provider: RightFit Services
   - Status: Active

3. **kerry robins**
   - Email: kerradeth@gmail.com
   - Phone: 07710536803
   - Type: CLEANER
   - Service Provider: RightFit Services
   - Status: Active

#### Customer (Original - Still Present)
**Highland Haven Lodges**
- Contact: Emma Henderson
- Email: emma@highlandhaven.co.uk
- Phone: +44 1479 123456
- Service Provider: RightFit Services
- Status: Active

### Test Data (Newly Created) ‚úÖ

#### Test Tenants
1. **CleanCo Services (Test)** - Cleaning provider (ID: tenant-cleaning-test)
2. **FixIt Maintenance (Test)** - Maintenance provider (ID: tenant-maintenance-test)
3. **ABC Properties LLC (Test)** - Customer/landlord (ID: tenant-customer-test)

#### Test Users (10 new users)
See [Test-Users.md](../Test-Users.md) for complete list and credentials.

---

## Database Connection

```bash
# Connection String
DATABASE_URL="postgresql://rightfit_user:rightfit_dev_password@localhost:5433/rightfit_dev?schema=public"

# Connect via psql
PGPASSWORD=rightfit_dev_password psql -h localhost -p 5433 -U rightfit_user -d rightfit_dev

# Query scripts
node scripts/query-test-users.js        # Users only
node scripts/query-all-test-data.js     # All data (Users, Workers, Customers, Service Providers)
```

---

## Schema Versioning

**Prisma Schema Location**: `/packages/database/prisma/schema.prisma`
**Migrations Location**: `/packages/database/prisma/migrations`
**Last Migration**: Check migration directory for latest

---

## Notes

- ‚úÖ All original data is preserved and active
- ‚úÖ Test data created in separate test tenants
- ‚úÖ Multi-tenant isolation is working correctly
- ‚ö†Ô∏è  No test Workers or Customers created for test tenants yet
- üìù Consider creating test Workers/Customers for test tenants

---

**Generated By**: Development Team
**Last Updated**: November 7, 2025 at 12:30:00
**Next Review**: Update when schema changes or major data additions
